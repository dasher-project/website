 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><HEAD><META NAME="GENERATOR" CONTENT="Generated by website.p, free software from TradeNotAid.com - dedicated to making the web useful for poor countries">
<link rel="shortcut icon" href="/favicon.ico">
<Title>
Inference Group: Dasher Project: Making the Training Text 
</Title>
<STYLE TYPE="TEXT/CSS"><!--
H4,P,TD,TH,UL,DD,DT,DL,OL { font-family:  'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif}
P.indented {margin-left:0.5cm; margin-right:0.5cm}
BODY,DIV { font-family:  'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;}
TT,PRE { font-family: Courier, monospace;}
SUP,SUB,SMALL { font-size: 90%}
.smaller { font-size: 80%}
SPAN.header { font-family: times, roman; font-size: 200%}
H1 { font-family:  'Lucida Grande', Verdana, Geneva, Lucida, arial, helvetica, sans serif; font-size: 180%}
H2 { font-family:  'Lucida Grande', Verdana, Geneva, Lucida, arial, helvetica, sans serif; font-size: 135%}
H3 { font-family:  'Lucida Grande', Verdana, Geneva, Lucida, arial, helvetica, sans serif; font-size: 120%}
abbr, acronym, .help {
  border-bottom: 1px dotted #333;
  cursor: help;
}
.talklist_date{ background-color: #dddddd; font-weight: bold; }
.talklist_header{ font-weight: bold; }
.talklist_entry{ }
.talklist_block{ clear: right; }
.talklist_block_small{ font-size: 0.8em; }
.talklist_date_small{ background-color: #dddddd; font-weight: bold; }
.talklist_header_small{ font-weight: bold; }
--></STYLE></HEAD>
<BODY BGCOLOR="#ffffee"  TEXT="#000000" LINK="#0000C8" ALINK="#C80000" VLINK="#C80000">
<!-- This is the master table that everything sits inside -->
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR valign=top ><!--This row is the parent organization head bar -->
<td colspan="2"  bgcolor="#beffd4"> <center> 
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0><tr><td  >
<center> <b><A style="text-decoration: none" HREF="http://www.inference.org.uk/is/">Inference Group</a></b> </center> 
</td>
</tr></table>
</center> </td>
</tr> 
<tr bgcolor="#008080" ><td colspan=3 ><img src="/images/pixel.gif" width="1" height="4" alt="."></td></tr>
<TR valign=top><!--This row contains the first bit of the navigation column (left) and the body of the page (right) -->
<!--begin sidebar-->
<TD height="400" VALIGN=TOP WIDTH="150" BGCOLOR="#95ffff">
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0><tr>
<td width=4><img src="/images/pixel.gif"  alt="." width="4" height=1></td>
<td VALIGN=TOP WIDTH="150" >
<font face="Helvetica">
<br><div> <center><a HRef="./" ><font size=+1><b>Dasher Project</b></font></a></center></div>
<br><div> <table width="100%" cellpadding=0 cellspacing=0 border=0>
<tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef="./" >Home</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=DasherSummary.html >What is Dasher for?</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=DasherSummary2.html >How does Dasher work?</a></b>&nbsp;</td></tr>
<tr valign=top><td width=7 >&#183;</td><td width=-9 nowrap><a hRef=Novice.html >Three-page explanation</a>&nbsp;</td></tr>
<tr valign=top><td width=7 >&#183;</td><td width=-9 nowrap><a hRef=Demonstrations.html >Demonstrations</a>&nbsp;</td></tr>
<tr valign=top><td width=7 >&#183;</td><td width=-9 nowrap><a hRef=TryJavaDasherNow.html >Try Dasher in your browser</a>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Download.html >Download </a></b>&nbsp;</td></tr>
<tr valign=top><td width=7 >&#183;</td><td width=-9 nowrap><a hRef=tips.html >Tips for Novices</a>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=SpecialNeeds.html >Special Needs</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=MobileDasher.html >Mobile Dasher</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Languages.html >Languages</a></b>&nbsp;</td></tr>
<tr valign=top><td width=7 >&#183;</td><td width=-9 nowrap bgcolor="#ffffee" ><em><a hRef=Fonts.html >Fonts</a></em>&nbsp;<b>&#171;</b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Directions.html >Future directions</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Publications.html >Publications</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=History.html >History</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Develop.html >Development</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=News.html >Press coverage</a></b>&nbsp;</td></tr>
<tr><td><img src=/images/pixel.gif width=1 height=6 alt="."></td></tr><tr valign=top><td colspan=2 width=-2 nowrap><b><a hRef=Press.html >Press Information</a></b>&nbsp;</td></tr>
</table>
</div>
<br><div> <b><a href="http://www.metafaq.com/faq/dasher/">Any questions?<br><img border=0 src="/images/mfsmallcyan.gif" alt="metafaq" width="100" height="26"></a></b></div>
<br><div> </div>
<br><div> <FORM METHOD=GET ACTION="http://web-search.cam.ac.uk/query.html">
Search :
<INPUT NAME="qp" TYPE="hidden" VALUE="site:www.inference.phy.cam.ac.uk">
<INPUT NAME="qt" TYPE="text" SIZE=10 VALUE="">
</FORM>
</div>
</font>
</td></tr></table>
</td>
<!--end sidebar-->
<td  bgcolor="#008080" width=1 rowspan=1><img src="/images/pixel.gif" width="1" height="1" alt="."></td>
<TD rowspan=1 VALIGN=TOP WIDTH="640" BGCOLOR="#ffffee" >
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=8><tr><td VALIGN=TOP WIDTH="640" >
<font face="Helvetica">
<h2>Making the Training Text</h2>
<p> The training text should be a plain text file containing
 text `similar' to what you intend to write.
 The larger the better.
 We think that 300K is a good size to aim for.
 Our preferred <b>file format</b> for all corpuses is <b>UTF-8</b>, but
 if you prefer to provide another format, that's OK; when supplying the file
 please include a description of its contents and name the format; we'll
 use the linux utility <b>iconv</b> to convert, if necessary.
</p><p>
 Example training texts that you could use are:
<ul>
  <li>Take all the documents you have written, and glue them
       all together in one big document. 
</li>
  <li>Use novels - eg, we used Jane Austen's <em>Emma</em> from
   <a href=http://promo.net/pg/>Project Gutenberg</a>. The problem with using
       just one or two novels, however, is that particular words (like Emma or Alice)
       occur very frequently; so novels are not ideal for a general-purpose training text.
</li>
       <li>Use all the email messages you have written, and glue them
       all together in one big document..
</li>
     </ul>

     <h3>Existing corpuses</h3>
<a href=http://www.hit.uib.no/corpora/>There is a corpora mailing list; this website has lots of
     useful links</a>.


<h3>How to make a general-purpose training text</h3>     
<p>
 You can make a pretty good corpus simply by concatenating
 a load of documents in your chosen language. Such a corpus is
 pretty good, but not ideal, since, for example, if you
 include all of <em>Alice in Wonderland</em>, the word <em>Alice</em>
 and the phrase <em>white rabbit</em> will
 occur far more often than normal. The aims
 of the more complicated procedure described below are
<ol>
  <li>to create a corpus that has all common
       words represented in a variety of contexts, with no
       one source document dominating the statistics;
       </li>
  <li>to create a corpus that can be sensibly
       shrunk to make a smaller corpus (for handheld computers
       with small memory, for example).
       </li>
</ol>
</p><p>
 Here's how I made the training text for the English version of
 Dasher.
</p>
<ol>
  <li>
       Get lots of English documents.  Get far more material than you think you need,
       so that we can select a <em>well-balanced</em>
       set of sentences in a sensible way, as follows.
       </li>
  <li>
       Pre-process them all so that there is exactly one sentence per line.
<br>       I did this using a perl program I wrote,
       <a href=/mackay/perl/processbook.p>processbook.p</a>
       with scripts like this
       <pre>
foreach f ( alice emma )
  processbook.p  /books0/$f > /books/$f
end
</pre>       
       </li>
  <li><b>Now</b>, obtain a listing of the 2000 most frequent words in
       the language. The idea is, since these words are common, it is important that we should
       have them represented several times each in the final corpus, in a variety of
       contexts. We will use these words to select which sentences are included
       from our over-large corpus.
       <br>
       I obtained such a list from the internet and put it in a file called <tt>dict</tt>.
       I removed from dict any absurdly common words that prevented the remaining steps from
       working nicely.
       </li>
  <li>
       Use another  program to select from each pre-processed book the sentences
       that contain the 2000 required words. Go through the required words in order,
       so that the resulting corpus is also ordered, with the top of the corpus containing
       examples of use of the most common words; that way, the corpus can be shrunk by cutting
       its tail off, and should still be an appropriate corpus for its size.
       <br>
       Glue the sentences together into plausible-sized paragraphs, so as to emulate
       normal writing.
       <br>
       I did this step by using the linux utility <b>glimpse</b> and my perl
       program <a href=/mackay/perl/corpus.p>corpus.p</a>
       <pre>
rm  /data/coll/mackay/books/*~
glimpseindex -b  -B   -H ~/dasher/  /data/coll/mackay/books/
corpus.p k=1 f=4 o=corpus4.txt
       </pre>
       That's how I made <a href=/dasher/download/english/corpus4.txt1>this corpus</a> (316K),
       which is used in Dasher 1.6.8.
       </li>
       <li>
       If you have any non-ASCII characters, you need to convert the file to 
       UTF-8 (or send it to us so we can do it). iconv is a Unix tool that can
       do this. If your text is in ISO-8859-1 format (ie, Western Europe), run
<pre>
iconv -f iso-8859-1 -t utf-8 corpus >corpus.utf8
</pre>
which will produce a UTF-8 version of the corpus in corpus.utf8.
	    Another method for converting to UTF8 using perl is this:
<pre>
#!/usr/local/bin/perl5.8.4
use Encode;

local $/;
open(TEXT, "&lt; infile.txt") or die $!;
open (UTF8, "> outfile.txt") or die $!;
my $data = &lt;TEXT>;
Encode::from_to($data, "iso-8859-1", "utf8"); # the converting line
binmode UTF8; # the filehandle should be binary for printing UTF8
print UTF8 $data;
	    </pre>
	    A useful command for checking what format a file is in is
	    <pre>file filename.txt
	    </pre>
</li>
</ol>

</p><p>
 If people make good corpuses in other languages and wish to share
 them, I can put them on <a href=/dasher/download/training>this site</a>.
</p>
<p>
 Two-letter country codes
 for the ends of training filenames
 can be found at <a href=http://www.theodora.com/country_digraphs.html>(digraphs page)</a>.
</p>


</td></tr><tr><td>
<hr size=1 noshade><table width=100%><tr><td valign=top><div align=right>The Dasher project is supported  by the Gatsby Foundation<br> and by the European Commission in the context of<br> the <a href=http://www.aegis-project.eu>AEGIS project</a> - open Accessibility Everywhere: Groundwork, Infrastructure, Standards)</div> </td><td valign=top width=70><img src="/aegis/logo.png" border=0 width="68" height="100"></td></tr></table><hr size=2 noshade><div align=right><A HREF="http://www.inference.phy.cam.ac.uk/mackay/">David MacKay</a></div><div align=left>Site last modified Sat Mar 19 12:11:40 UTC 2016
</div>
   </font>
</td></tr></table>
</td>
</tr>
 </table>
</body></html>
